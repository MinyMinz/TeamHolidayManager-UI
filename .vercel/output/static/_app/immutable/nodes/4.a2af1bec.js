import{s as de,f as c,a as A,l as X,g as f,h as v,w as re,c as B,m as Y,d,j as i,i as J,y as o,H as U,x as V,K as me,u as _e,n as he}from"../chunks/scheduler.fd84be43.js";import{S as be,i as ge,t as z,c as ve,a as H,g as ye,b as ie,d as ue,m as ce,e as fe}from"../chunks/index.681d7507.js";import{b as R,i as we,g as ke,I as pe}from"../chunks/navigation.bb76d6ea.js";import{P as Ie}from"../chunks/public.7ee89064.js";async function Ee(l,e){try{const t=await(await window.fetch(`${Ie}/users/login`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:l,password:e})})).json();if(t.email===l&&t.password===e){R.set(null);const{id:n,email:r,full_name:y,team_name:E,role_name:p}=t;we.set(!0),window.sessionStorage.setItem("userLoggedIn",JSON.stringify({id:n,email:r,full_name:y,team_name:E,role_name:p})),ke("/")}else R.set("Invalid email or password.")}catch{R.set("An error occurred. Please try again later.")}}function oe(l){let e,s;return{c(){e=c("p"),s=X(l[3]),this.h()},l(t){e=f(t,"P",{class:!0});var n=v(e);s=Y(n,l[3]),n.forEach(d),this.h()},h(){i(e,"class","error")},m(t,n){J(t,e,n),o(e,s)},p(t,n){n&8&&he(s,t[3])},d(t){t&&d(e)}}}function $e(l){let e,s,t;return{c(){e=c("input"),this.h()},l(n){e=f(n,"INPUT",{class:!0,type:!0}),this.h()},h(){i(e,"class","form-input"),i(e,"type","password"),e.required=!0},m(n,r){J(n,e,r),U(e,l[1]),s||(t=V(e,"input",l[7]),s=!0)},p(n,r){r&2&&e.value!==n[1]&&U(e,n[1])},d(n){n&&d(e),s=!1,t()}}}function Pe(l){let e,s,t;return{c(){e=c("input"),this.h()},l(n){e=f(n,"INPUT",{class:!0,type:!0}),this.h()},h(){i(e,"class","form-input"),i(e,"type","text"),e.required=!0},m(n,r){J(n,e,r),U(e,l[1]),s||(t=V(e,"input",l[6]),s=!0)},p(n,r){r&2&&e.value!==n[1]&&U(e,n[1])},d(n){n&&d(e),s=!1,t()}}}function Ce(l){let e,s;return e=new pe({props:{style:"font-size: 18px",icon:"mdi:eye-off"}}),{c(){ie(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,n){ce(e,t,n),s=!0},i(t){s||(H(e.$$.fragment,t),s=!0)},o(t){z(e.$$.fragment,t),s=!1},d(t){fe(e,t)}}}function Se(l){let e,s;return e=new pe({props:{style:"font-size: 18px",icon:"mdi:eye"}}),{c(){ie(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,n){ce(e,t,n),s=!0},i(t){s||(H(e.$$.fragment,t),s=!0)},o(t){z(e.$$.fragment,t),s=!1},d(t){fe(e,t)}}}function Te(l){let e,s,t,n,r="Sign in",y,E,p,$,P,j,m,F,S,w,K,q,k,_,h,G,I,Z="Sign in",D,Q,x,u=l[3]&&oe(l);function ee(a,g){return a[2]?Pe:$e}let M=ee(l),b=M(l);const te=[Se,Ce],C=[];function ne(a,g){return a[2]?0:1}return _=ne(l),h=C[_]=te[_](l),{c(){e=c("main"),s=c("div"),t=c("div"),n=c("h1"),n.textContent=r,y=A(),u&&u.c(),E=A(),p=c("form"),$=c("div"),P=c("label"),j=X(`Email:
            `),m=c("input"),F=A(),S=c("div"),w=c("label"),K=X(`Password:
            `),b.c(),q=A(),k=c("button"),h.c(),G=A(),I=c("button"),I.textContent=Z,this.h()},l(a){e=f(a,"MAIN",{class:!0});var g=v(e);s=f(g,"DIV",{class:!0});var T=v(s);t=f(T,"DIV",{class:!0});var N=v(t);n=f(N,"H1",{class:!0,"data-svelte-h":!0}),re(n)!=="svelte-8h4tgn"&&(n.textContent=r),y=B(N),u&&u.l(N),E=B(N),p=f(N,"FORM",{class:!0});var L=v(p);$=f(L,"DIV",{class:!0});var se=v($);P=f(se,"LABEL",{});var W=v(P);j=Y(W,`Email:
            `),m=f(W,"INPUT",{class:!0,type:!0}),W.forEach(d),se.forEach(d),F=B(L),S=f(L,"DIV",{class:!0});var le=v(S);w=f(le,"LABEL",{});var O=v(w);K=Y(O,`Password:
            `),b.l(O),q=B(O),k=f(O,"BUTTON",{type:!0,class:!0});var ae=v(k);h.l(ae),ae.forEach(d),O.forEach(d),le.forEach(d),G=B(L),I=f(L,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),re(I)!=="svelte-12isot5"&&(I.textContent=Z),L.forEach(d),N.forEach(d),T.forEach(d),g.forEach(d),this.h()},h(){i(n,"class","login-title"),i(m,"class","form-input"),i(m,"type","email"),m.required=!0,i($,"class","mb-4 w-full"),i(k,"type","button"),i(k,"class","ml-1 absolute top-50 h-10"),i(S,"class","w-full"),i(I,"type","button"),i(I,"class","bg-green-500 hover:bg-green-700 text-white font-bold py-3 px-4 rounded-lg focus:outline-none focus:shadow-outline w-full mt-6 mb-1"),i(p,"class","login-form"),i(t,"class","login-form-container"),i(s,"class","login-container"),i(e,"class","page")},m(a,g){J(a,e,g),o(e,s),o(s,t),o(t,n),o(t,y),u&&u.m(t,null),o(t,E),o(t,p),o(p,$),o($,P),o(P,j),o(P,m),U(m,l[0]),o(p,F),o(p,S),o(S,w),o(w,K),b.m(w,null),o(w,q),o(w,k),C[_].m(k,null),o(p,G),o(p,I),D=!0,Q||(x=[V(m,"input",l[5]),V(k,"click",l[8]),V(I,"click",l[4])],Q=!0)},p(a,[g]){a[3]?u?u.p(a,g):(u=oe(a),u.c(),u.m(t,E)):u&&(u.d(1),u=null),g&1&&m.value!==a[0]&&U(m,a[0]),M===(M=ee(a))&&b?b.p(a,g):(b.d(1),b=M(a),b&&(b.c(),b.m(w,q)));let T=_;_=ne(a),_!==T&&(ye(),z(C[T],1,1,()=>{C[T]=null}),ve(),h=C[_],h||(h=C[_]=te[_](a),h.c()),H(h,1),h.m(k,null))},i(a){D||(H(h),D=!0)},o(a){z(h),D=!1},d(a){a&&d(e),u&&u.d(),b.d(),C[_].d(),Q=!1,me(x)}}}function Ne(l,e,s){let t;_e(l,R,m=>s(3,t=m));let n="",r="",y=!1;async function E(){await Ee(n,r)}function p(){n=this.value,s(0,n)}function $(){r=this.value,s(1,r)}function P(){r=this.value,s(1,r)}return[n,r,y,t,E,p,$,P,()=>s(2,y=!y)]}class Be extends be{constructor(e){super(),ge(this,e,Ne,Te,de,{})}}export{Be as component};
